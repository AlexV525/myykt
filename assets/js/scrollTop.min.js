(function(e){var b=jQuery.event.special,d="D"+(+new Date()),c="D"+(+new Date()+1);b.scrollstart={setup:function(){var g,f=function(j){var h=this,i=arguments;if(g){clearTimeout(g)}else{j.type="scrollstart";jQuery.event.dispatch.apply(h,i)}g=setTimeout(function(){g=null},b.scrollstop.latency)};jQuery(this).bind("scroll",f).data(d,f)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(d))}};b.scrollstop={latency:300,setup:function(){var g,f=function(j){var h=this,i=arguments;if(g){clearTimeout(g)}g=setTimeout(function(){g=null;j.type="scrollstop";jQuery.event.dispatch.apply(h,i)},b.scrollstop.latency)};jQuery(this).bind("scroll",f).data(c,f)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(c))}};var a={setting:{startline:150,scrollto:0,scrollduration:400,fadeduration:[500,100],el:".wrapper",controlEl:".scrollTop"},controlattrs:{offsetx:10,offsety:10},state:{isvisible:false,shouldvisible:false},scrollup:function(){this.$control.fadeOut();if(isNaN(this.setting.scrollto)){var f=this.setting.scrollto}else{var f=parseInt(this.setting.scrollto)}if(typeof f==="string"&&e("#"+f).length===1){f=e("#"+f).offset().top}else{f=0}this.$el.animate({scrollTop:f},this.setting.scrollduration)},keepfixed:function(){var h=e(window);var g=h.scrollLeft()+h.width()-this.$control.width()-this.controlattrs.offsetx;var f=h.scrollTop()+h.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:g+"px",top:f+"px"})},togglecontrol:function(){var f=e(this.setting.el).scrollTop();if(!this.cssfixedsupport){this.keepfixed()}this.state.shouldvisible=(f>=this.setting.startline);if(this.state.shouldvisible&&!this.state.isvisible){this.$control.stop().fadeIn(this.setting.fadeduration[0]);this.state.isvisible=true}else{if(this.state.shouldvisible===false&&this.state.isvisible){this.$control.stop().fadeOut(this.setting.fadeduration[1]);this.state.isvisible=false}}},init:function(){e(document).ready(function(){var f=a;var g=document.all;f.cssfixedsupport=!g||g&&document.compatMode==="CSS1Compat"&&window.XMLHttpRequest;f.$el=e(f.setting.el);f.$control=e(f.setting.controlEl).on("click",function(){f.scrollup();return false});if(document.all&&!window.XMLHttpRequest&&f.$control.text()!==""){f.$control.css({width:f.$control.width()})}f.togglecontrol();e(f.setting.el).on("touchmove scroll resize",function(){f.togglecontrol()}).bind("scrollstop",function(){f.togglecontrol()})})}};a.init()})(jQuery);